<!DOCTYPE html>
<html lang="tr">
<head>
    <%- include('../partials/head') %>
</head>
<body>
    <%- include('../partials/nav') %>
    <div class="container mt-5">
        <%- include('../partials/flash-messages') %>
        <% if (typeof message != 'undefined') { %>
            <div class="alert alert-<%= message.class %>">
                <%= message.text %>
            </div>
        <% } %>
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <h1 class="h3 mb-4">Yeni şifre oluştur</h1>
                <form action="/auth/password-new" method="POST">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                    <input type="hidden" name="userId" value="<%= userId %>">
                    <input type="hidden" name="token" value="<%= token %>">
                    <div class="mb-3">
                        <label for="password" class="form-label">Yeni Şifre</label>
                        <input type="password" 
                               class="form-control" 
                               id="password" 
                               name="password" 
                               placeholder="En az 6 karakter, 1 harf ve 1 rakam içermeli" 
                               value="<%= formData && formData.password ? formData.password : '' %>"
                               required>
                        <div class="form-text">Şifre en az 6 karakter olmalı ve en az 1 harf ile 1 rakam içermelidir.</div>
                    </div>
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Yeni Şifre (Tekrar)</label>
                        <input type="password" 
                               class="form-control" 
                               id="confirmPassword" 
                               name="confirmPassword" 
                               placeholder="Yeni şifrenizi tekrar girin" 
                               value="<%= formData && formData.confirmPassword ? formData.confirmPassword : '' %>"
                               required>
                    </div>
                    <button type="submit" class="btn btn-primary mb-4">Kaydet</button>
                </form>
            </div>
        </div>
    </div>
    <%- include('../partials/scripts') %>
</body>
</html>