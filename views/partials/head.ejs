<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title><%= typeof title != "undefined" ? title : "BlogApp" %></title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<!-- Custom CSS -->
<link rel="stylesheet" href="/css/style.css">
<!-- Dark Mode Initialization - Fixed -->
<script>
    // Immediately invoked function to set theme before page renders (prevents flickering)
    (function() {
        try {
            // Get the theme from localStorage - check both formats ('dark' and 'true')
            const savedTheme = localStorage.getItem('darkMode');
            console.log("Initial theme from localStorage:", savedTheme);
            
            let isDarkMode = false;
            
            // Check both possible formats of stored theme value
            if (savedTheme === 'dark' || savedTheme === 'true' || 
               (!savedTheme && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                isDarkMode = true;
            }
            
            // Apply the theme to HTML element
            document.documentElement.setAttribute('data-bs-theme', isDarkMode ? 'dark' : 'light');
            console.log("Setting initial theme to:", isDarkMode ? 'dark' : 'light');
            
            // Also set a consistent value in localStorage for future use
            localStorage.setItem('darkMode', isDarkMode ? 'dark' : 'light');
        } catch (error) {
            console.error("Error setting initial theme:", error);
            // Fallback to light theme
            document.documentElement.setAttribute('data-bs-theme', 'light');
        }
    })();
</script>